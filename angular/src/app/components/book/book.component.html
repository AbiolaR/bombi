<div *ngIf="book" class="book">
    <img *ngIf="!isImgLoaded" class="cover" aria-label="Book Cover Placeholder" src="/assets/images/covers/loading-cover.png"/>
    <img (load)="isImgLoaded = true" loading="lazy" [class.hidden]="!isImgLoaded" class="cover" aria-label="Book Cover" src="{{book.coverUrl == '' ? '/assets/images/covers/blank.png' : environment.apiServerUrl + '/v1/books/fictioncovers/' + book.coverUrl}}"
    (click)="enlarge()"/>
    <div class="book-details">
        <div>
            <div class="head">
                <img class="lang" src="/assets/images/flags/{{book.language}}.svg" aria-label="Book Language"/>
                <div class="title-container">
                    <h1 #title class="title" (mouseover)="setAutoScroll(title)">{{book.title}}</h1>
                </div>
                <button mat-icon-button color="accent" class="share" [matMenuTriggerFor]="contactMenu">
                    <mat-icon>send</mat-icon>
                </button>
            </div>
            <span class="author">{{book.author || "author unknown"}}</span>
            <span class="delimiter" *ngIf="book.year"> | </span>
            <span class="year" *ngIf="book.year">{{book.year}}</span>
        </div>
        <app-download-cluster [book]="book" class="mobile" [mode]="BOOK">            
        </app-download-cluster>
    </div>
    <app-download-cluster [book]="book" class="desktop" [mode]="BOOK">
        
    </app-download-cluster>
</div>
<hr>

<mat-menu #contactMenu yPosition="above">
    <ng-template matMenuContent>
        <div class="contact-menu">
            <h3 *ngIf="userData.contacts.length < 1">{{ 'no-friends-yet' | translate }}</h3>
            <h3 *ngIf="userData.contacts.length > 0">{{ 'send-book-to' | translate }}</h3>
            <div *ngFor="let contact of userData.contacts" class="contact">
                <button mat-flat-button color="primary" (click)="shareBook(contact.name)">
                    {{contact.name}}
                    <mat-icon>send</mat-icon>
                </button>
                <mat-icon color="accent" class="add-message" (click)="openAddMessageDialog(contact.name)">note_add</mat-icon>
            </div>
        </div>
    </ng-template>
</mat-menu>